  <!DOCTYPE html>
  <html lang="es">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Buscar Ubicación y Lugares Cercanos</title>
      <style>

@font-face {
    font-family: 'SFProDisplay';
    src: url('./fonts/SFProDisplay-Heavy.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}





  

  .weather-info h3 {
    font-size: 2rem;
    margin-bottom: 10px;
    font-weight: 500;
  }






          body {
              font-family: Arial, sans-serif;
              background-color: #000000;
              margin: 0;
              padding: 0;
              display: flex;
              justify-content: center;
              align-items: center;
              height: 100vh;
              flex-direction: column;
              font-family: 'SFProDisplay';
          }
  }




          /* Estilo para el título */
          @font-face {
              font-family: 'SFProDisplay';
              src: url('SFProDisplay-Heavy.ttf') format('truetype');
          }

          h1 {
              text-align: center;
              color: yellow;
              font-size: 45px;
              padding: 10px 0;
              font-family: 'SFProDisplay', sans-serif; /* Usar la fuente que subiste */
              background-color: rgb(0, 0, 0);
              margin: 0;
              border-bottom: none;
          }

          /* Estilo para la barra de búsqueda */
          #search-box {
              width: 100%;
              max-width: 400px;
              padding: 12px;
              margin: 20px auto;
              font-size: 18px;
              border-radius: 25px;
              border: none; /* Sin borde visible */
              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); /* Sombra difusa */
              outline: none;
              transition: all 0.3s ease;
              background-color: white;
              color: #333;
          }

          #search-box:focus {
              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5); /* Sombra difusa más pronunciada al hacer foco */
          }

          #search-box::placeholder {
              color: #aaa;
          }

          /* Estilo para el mapa */
          #map {
              height: 1000px;
              width: 100%;
              border-radius: 8px;
              margin-top: 20px;
          }
        
      
          /* Estilo general para el cuerpo */
              body {
              font-family: 'SFProDisplay', sans-serif;;
              background-color: #000000;
              margin: 0;
              padding: 0;
              display: flex;
              justify-content: center;
              align-items: center;
              height: 100vh;
              flex-direction: column;
          }

  /* Barra de navegación superior *//* Barra de navegación superior *//* Barra de navegación superior *//* Barra de navegación superior */
  nav {
    background-color: yellow;
    padding: 13.3px 10px; /* Ajusta el espaciado para alargar la barra verticalmente */
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-family: 'SFProDisplay', sans-serif;
    font-size: 1.5rem;
    width: 100%; /* Extiende la barra al ancho completo */
    box-sizing: border-box; /* Asegura que el padding no afecte el ancho total */
  }

  nav a {
    color: black;
    margin: 0 15px;
    text-decoration: none;
    font-weight: bold;
  }

  nav a:hover {
    color: orange;
  }


  /* Estilo para el recuadro del clima */
  .weather-container {
        display: none;
        background-color: transparent;
        padding: 10px;  
        border-radius: 5px;
        width: 80%;
        max-width: 450px;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-45%, -30%);
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        z-index: 999;
        text-align: center;
      }

      .weather-container.active {
        display: block;
      }

      /* Fondo semitransparente */
      .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 998;
        
      }

      /* Estilo para la información del clima */
      .weather-info {
        text-align: center;
        transform: translateX(80px);
        background-image: url('/images/montaña.jpg');
        background-size: cover;
        background-position: center;
        padding: 35px;
        border-radius: 10px;
        width: 230px;
        font-family: 'SFProDisplay', sans-serif;
        color: #fff; /* Ajusta el color del texto si es necesario */
        font-size: 1.5rem;
      }





  /* Barra de navegación superior *//* Barra de navegación superior *//* Barra de navegación superior *//* Barra de navegación superior */
      

      
  </style>


      



          







    </style>
  </head>
  <body>
    <!-- Barra de navegación en la parte superior --><!-- Barra de navegación en la parte superior -->
      
    <nav>
      <a href="home.html">Inicio</a>
      <a href="paypalindex.html">Productos</a>
      <a href="about.html">Acerca de</a>
      <a href="javascript:void(0);" class="logout-link" onclick="logout()">Cerrar sesión</a>
      <a href="javascript:void(0);" class="logout-link" onclick="toggleWeather()">Ver Clima</a>
    </nav> 
    
    <!-- Barra de navegación en la parte superior --><!-- Barra de navegación en la parte superior --><!-- Barra de navegación en la parte superior -->

      <h1>¿Que desea bucar?</h1>
    




      <main>

        <!-- Recuaadro del clima (oculto por defecto) --><!-- Recuaadro del clima (oculto por defecto) --><!-- Recuaadro del clima (oculto por defecto) --><!-- Recuaadro del clima (oculto por defecto) -->
      <div id="weather-container" class="weather-container">

      
        <div id="weather" class="weather-info">
          <p id="temperature"></p>
          <p id="weather-description"></p>
          <p id="humidity"></p>
        </div>
      </div>
          </div>
          </main>   
          <!-- Fondo semitransparente (oculto por defecto) -->
      <div id="overlay" class="overlay" onclick="closeWeather()"></div>

      <!-- Recuaadro del clima (oculto por defecto) -->
      <div id="weather-container" class="weather-container">
      
        <div id="weather" class="weather-info">
          <p id="temperature"></p>
          <p id="weather-description"></p>
          <p id="humidity"></p>
        </div>
      </div>

      
    </main>





    
    <script>
      function logout() {
        fetch('/logout', {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json'
          }
        })
        .then(response => {
          if (response.ok) {
            window.location.href = 'login.html';
          } else {
            alert('Hubo un error al cerrar la sesión');
          }
        });
      }

      function toggleWeather() {
        const weatherContainer = document.getElementById('weather-container');
        const overlay = document.getElementById('overlay');
        
        // Abrir o cerrar el recuadro de clima
        weatherContainer.classList.toggle('active');
        overlay.classList.toggle('active');
        
        if (weatherContainer.classList.contains('active')) {
          requestLocation();
        }
      }

      function closeWeather() {
        const weatherContainer = document.getElementById('weather-container');
        const overlay = document.getElementById('overlay');
        
        weatherContainer.classList.remove('active');
        overlay.classList.remove('active');
      }

      function requestLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition, showError);
        } else {
          alert("Geolocalización no soportada por este navegador.");
        }
      }

      function showPosition(position) {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;
        getWeather(lat, lon);
      }

      function showError(error) {
        alert("No se pudo obtener la ubicación. Usaremos una ubicación predeterminada.");
        getWeather(31.73, -106.48); // Ciudad Juárez
      }

      function getWeather(lat, lon) {
        const apiKey = 'f9cea72b1a2f5c523690543b4c201e2b';
        const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric&lang=es`;

        fetch(url)
          .then(response => response.json())
          .then(data => {
            document.getElementById('weather').style.display = 'block';
            document.getElementById('temperature').textContent = `Temperatura: ${data.main.temp}°C`;
            document.getElementById('weather-description').textContent = `Descripción: ${data.weather[0].description}`;
            document.getElementById('humidity').textContent = `Humedad: ${data.main.humidity}%`;
          })
          .catch(err => alert("Error al obtener el clima: " + err));
      }
    </script>














      
      
      <!-- Barra de búsqueda para lugares -->
      <input id="search-box" type="text" placeholder="Buscar lugares..." />

      

      <div id="map"></div>
      
      <script>
          let map, service, infowindow, searchBox;
          let markers = [];

          // Función para inicializar el mapa
          function initMap() {
              // Usamos la geolocalización del navegador para obtener la ubicación actual
              if (navigator.geolocation) {
                  navigator.geolocation.getCurrentPosition(function(position) {
                      const userLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                      
                      // Inicializamos el mapa centrado en la ubicación del usuario
                      map = new google.maps.Map(document.getElementById('map'), {
                          center: userLocation,
                          zoom: 15
                      });

                      // Creamos un marcador para la ubicación del usuario
                      const marker = new google.maps.Marker({
                          map: map,
                          position: userLocation,
                          title: "Tu Ubicación"
                      });

                      // Mostramos la ubicación en la ventana de información
                      infowindow = new google.maps.InfoWindow();
                      infowindow.setContent("Nuesta ubicacion");
                      infowindow.open(map, marker);

                      // Barra de búsqueda
                      searchBox = new google.maps.places.SearchBox(document.getElementById('search-box'));

                      // Actualizar los resultados al hacer una búsqueda
                      map.addListener('bounds_changed', function() {
                          searchBox.setBounds(map.getBounds());
                      });

                      // Cuando se selecciona un lugar de la barra de búsqueda
                      searchBox.addListener('places_changed', function() {
                          const places = searchBox.getPlaces();

                          if (places.length == 0) {
                              return;
                          }

                          // Eliminar los marcadores previos antes de agregar nuevos
                          clearMarkers(); // Llamamos a la función para borrar los marcadores previos

                          // Mostrar los lugares encontrados
                          const bounds = new google.maps.LatLngBounds();
                          places.forEach(function(place) {
                              if (!place.geometry) {
                                  return;
                              }

                              // Crear un marcador para el lugar
                              const marker = new google.maps.Marker({
                                  map: map,
                                  title: place.name,
                                  position: place.geometry.location
                              });

                              // Agregar marcador al arreglo
                              markers.push(marker);

                              // Crear una ventana de información
                              google.maps.event.addListener(marker, 'click', function() {
                                  infowindow.setContent(place.name);
                                  infowindow.open(map, marker);
                              });

                              // Expandir el mapa para ajustar los resultados
                              bounds.extend(place.geometry.location);
                          });
                          map.fitBounds(bounds); // Ajusta el mapa al nuevo conjunto de resultados
                      });

                  }, function() {
                      alert("No se pudo obtener tu ubicación.");
                  });
              } else {
                  alert("La geolocalización no es compatible con este navegador.");
              }
          }

          // Función para limpiar los marcadores del mapa
          function clearMarkers() {
              markers.forEach(function(marker) {
                  marker.setMap(null); // Elimina cada marcador del mapa
              });
              markers = []; // Resetea el arreglo de marcadores
          }

      </script>
      
    


                          

                      












      </script>

      <!-- Cargar el SDK de Google Maps con tu clave de API -->
      <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCiMp-o6OdDuW5zEqAjejfjlx1oFHOt420&libraries=places&callback=initMap" async defer></script>
      <!-- Fondo semitransparente (oculto por defecto) -->
      <div id="overlay" class="overlay" onclick="closeWeather()"></div>

      <!-- Recuaadro del clima (oculto por defecto) -->
      <div id="weather-container" class="weather-container">
  </body>
  </html>
